{% load static %}
{% comment %} {% load authentication_extras %} {% endcomment %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Restoran - Bootstrap Restaurant Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="{% static 'https://fonts.googleapis.' %}">
    <link rel="preconnect" href="{% static 'https://fonts.gstatic.com' %}" crossorigin>
    <link
        href="{% static 'https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600&family=Nunito:wght@600;700;800&family=Pacifico&display=swap' %}"
        rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="{% static 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css' %}"
        rel="stylesheet">
    <link href="{% static 'https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css' %}"
        rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="{% static 'lib/animate/animate.min.css' %}" rel="stylesheet">
    <link href="{% static 'lib/owlcarousel/assets/owl.carousel.min.css' %}" rel="stylesheet">
    <link href="{% static 'lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css' %}" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous">
    </script>
    <!-- Customized Bootstrap Stylesheet -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
    <style>
        body {font-family: Arial, Helvetica, sans-serif;}
        * {box-sizing: border-box;}
        
        /* Button used to open the chat form - fixed at the bottom of the page */
        .open-button {
          background-color: #555;
          color: white;
          padding: 16px 20px;
          border: none;
          cursor: pointer;
          opacity: 0.8;
          position: fixed;
          bottom: 23px;
          right: 28px;
          width: 280px;
          border-radius: 12px;
          font-family:sans-serif;
        }
        
        /* The popup chat - hidden by default */
        .chat-popup {
          display: none;
          position: fixed;
          bottom: 0;
          right: 15px;
          z-index: 9;
          border-radius: 12px;
        }
        
        /* Add styles to the form container */
        .form-container {
          max-width: 300px;
          padding: 10px;
          background-color: white;
          border: 3px solid #d1d0d0;
          border-radius: 12px;
        }
        
        /* Full-width textarea */
        .form-container textarea {
          width: 100%;
          padding: 15px;
          margin: 5px 0 22px 0;
          border: none;
          background: #f1f1f1;
          resize: none;
          min-height: 70px;
          box-shadow: 3px 3px 5px #c0bcbc;
        }
        
        /* When the textarea gets focus, do something */
        .form-container textarea:focus {
          /* background-color: #ddd; */
          outline: none;
        }
        
        /* Set a style for the submit/send button */
        .form-container .btn {
          background-color: #04aa6d9a;
          color: white;
          padding: 16px 20px;
          border: none;
          cursor: pointer;
          width: 100%;
          margin-top:10px;
          opacity: 0.8;
          border: 3px solid #04AA6D
        }



        
        /* Add a red background color to the cancel button */
        .form-container .cancel {
          background-color: rgba(255, 0, 0, 0.599);
          border: 3px solid red
        }
        
        /* Add some hover effects to buttons */
        .form-container .btn:hover, .open-button:hover {
          opacity: 1;
        }
        
        /* .scrollbest::-webkit-scrollbar-thumb {
            background-image: linear-gradient(180deg, #d0368a 0%, #708ad4 99%);
            box-shadow: inset 2px 2px 5px 0 rgba(#fff, 0.5);
            border-radius: 100px;
        } */

        .scrollbest{
            overflow-y: scroll;
            background-color: #b42525
        }

    </style>
</head>

<body>
    <div class="container-xxl bg-white p-0">
        {% comment %}
        <!-- Spinner Start -->
        <div id="spinner"
            class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rsrcem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End --> {% endcomment %}


        <!-- Navbar & Hero Start -->
        <div class="container-xxl position-relative p-0">
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark px-4 px-lg-5 py-3 py-lg-0">
                <a href="" class="navbar-brand p-0">
                    <h1 class="text-primary m-0"><i class="fa fa-utensils me-3"></i>Restoran</h1>
                    <!-- <img src="img/logo.png" alt="Logo"> -->
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                    <span class="fa fa-bars"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <div class="navbar-nav ms-auto py-0 pe-4">
                        <a href="{% url 'restaurant:chatgpt' %}" class="nav-item nav-link">ChatGPT</a>
                        <a href="{% url 'restaurant:homepage' %}" class="nav-item nav-link active">Home</a>
                        <a href="{% url 'restaurant:restaurant_index' %}" class="nav-item nav-link">Restaurant</a>
                        
                        {% if user.is_authenticated %}
                        <a href="{% url 'authentication:change_password' %}" class="nav-item nav-link">Changed Password </a>
                        <a href="{% url 'authentication:update_user_profile' request.user.pk %}"
                                        class="nav-item nav-link">Edit Profile</a>
                        <a class="nav-item nav-link">Hello, {{user.first_name}}</a>
                        <a href="{% url 'authentication:logout' %}" class="nav-item nav-link">Logout</a>
                        {% else %}
                        {% if "login" not in request.path %}
                        <a href="{% url 'authentication:login' %}" class="nav-item nav-link">Login</a>
                        {% endif %}
                        <a href="{% url 'authentication:signup' %}" class="nav-item nav-link">Signup</a>
                        {% endif %}
                        <a href="{% url 'restaurant:cart' %}" class="nav-item nav-link">Cart
                            <span class="badge badge-info">{{request.session.cart.keys|length}}</span>
                            <span class="sr-only">(current)</span></a>
                        </a>
                        {% if user.is_authenticated %}
                        <a href="{% url 'restaurant:orders' %}" class="nav-item nav-link">Order</a>
                        {% endif %}
                    </div>
                </div>
            </nav>

            <div class="container-xxl py-5 bg-dark hero-header mb-5">
                <div class="container my-5 py-5">
                    <div class="row align-items-center g-5">
                        <div class="col-lg-6 text-center text-lg-start">
                            <h1 class="display-3 text-white animated slideInLeft">Enjoy Our<br>Delicious Meal</h1>
                            <p class="text-white animated slideInLeft mb-4 pb-2">Tempor erat elitr rebum at clita.
                                Diam dolor diam ipsum sit. Aliqu diam amet diam et eos. Clita erat ipsum et lorem et
                                sit, sed stet lorem sit clita duo justo magna dolore erat amet</p>
                            <a href="" class="btn btn-primary py-sm-3 px-sm-5 me-3 animated slideInLeft">Book A
                                Table</a>
                        </div>
                        <div class="col-lg-6 text-center text-lg-end overflow-hidden">
                            <img class="img-fluid" src="{% static 'img/hero.png' %}" alt="">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Navbar & Hero End -->

        <div class="container my-2">
            {% for message in messages %}
            <div class="alert alert-{{message.tags}} alert-dismissible fade show" role="alert">
                {% if form.errors %}
                <strong>Message: </strong> {{form.errors}}
                {% else %}
                <strong>Message: </strong> {{message}}
                {% endif %}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            {% endfor %}
            {% block content %}
            {% endblock content %}
        </div>
        <button class="open-button" onclick="openForm()">ChatGPT</button>s

        <div class="chat-popup" id="myForm">
            <div class="form-container">
                {% csrf_token %}
                <h1 style="text-align: center; text-shadow: 3px 3px 4px #b0acac;color: #479fda; font-family:Copperplate, Papyrus, fantasy;">ChatGPT</h1>
                <div class="input-group">
                    <p class="text-black" name="prompt" row="4"  id="myans"  style="box-shadow: 3px 3px 5px #c0bcbc;font-family:Lucida Console;border-radius: 12px;height:150px;width:97%;overflow:auto;padding:2%;background: #f1f1f1">
                        You will get your ans here ....!
                    </p>
                </div>
                {% if prompt %}
                <span id="scrollTo" class = "scrollbest"></span>
                {% endif %}

                <div class="input-group">
                    <textarea type="text" name="prompt" id="myTextarea" class="" row="2" style="border-radius: 12px;font-family:Lucida Console;" placeholder="write anything here and get response..." required></textarea>
                    <button type="button" id="myButton" class = "btn btn-primary" style="border-radius: 12px;font-family:sans-serif;">Submit</button>
                </div>
                <!-- <button type="button" id="myButton" class = "btn btn-primary" >submit</button> -->
                <button type="button" class="btn cancel" onclick="closeForm()" style="border-radius: 12px;font-family:sans-serif;">Close</button>
                {% if prompt %}
                <span id="scrollTo" class = "scrollbest"></span>
                {% endif %}
            </div>
        </div>

        <script>
            function scrollToElement(elementId){
                $('html, body').animate({
                    scrollTop: $(`#${elementId}`).offset().top
                }, 1000);
            }
            scrollToElement('scrollTo')
        </script>

        <script>
            const textarea = document.getElementById("myTextarea");
            const button = document.getElementById("myButton");
            const div = document.getElementById("myans");
    
            button.addEventListener("click", () => {
                const xhr = new XMLHttpRequest();
                xhr.open("POST", "{% url 'restaurant:chatgpt' %}");
                xhr.setRequestHeader("Content-Type", "application/json");
                xhr.setRequestHeader("X-CSRFToken", "{{ csrf_token }}");
                xhr.onload = () => {
                    if (xhr.status === 200) {
                        console.log(xhr.responseText);
                        const response = JSON.parse(xhr.responseText);
                        div.innerHTML = response.result;
                    }
                };
                const data = {
                input_text: textarea.value,
                };
                console.log(textarea.value)
                xhr.send(JSON.stringify(data));
            });
        
        </script>


        <!-- Footer Start -->
        <div class="container-fluid bg-dark text-light footer pt-5 mt-5 wow fadeIn" data-wow-delay="0.1s">
            <div class="container py-5">
                <div class="row g-5">
                    <div class="col-lg-3 col-md-6">
                        <h4 class="section-title ff-secondary text-start text-primary fw-normal mb-4">Company</h4>
                        <a class="btn btn-link" href="">About Us</a>
                        <a class="btn btn-link" href="">Contact Us</a>
                        <a class="btn btn-link" href="">Reservation</a>
                        <a class="btn btn-link" href="">Privacy Policy</a>
                        <a class="btn btn-link" href="">Terms & Condition</a>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <h4 class="section-title ff-secondary text-start text-primary fw-normal mb-4">Contact</h4>
                        <p class="mb-2"><i class="fa fa-map-marker-alt me-3"></i>123 Street, New York, USA</p>
                        <p class="mb-2"><i class="fa fa-phone-alt me-3"></i>+012 345 67890</p>
                        <p class="mb-2"><i class="fa fa-envelope me-3"></i>info@example.com</p>
                        <div class="d-flex pt-2">
                            <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-twitter"></i></a>
                            <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-facebook-f"></i></a>
                            <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-youtube"></i></a>
                            <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-linkedin-in"></i></a>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <h4 class="section-title ff-secondary text-start text-primary fw-normal mb-4">Opening</h4>
                        <h5 class="text-light fw-normal">Monday - Saturday</h5>
                        <p>09AM - 09PM</p>
                        <h5 class="text-light fw-normal">Sunday</h5>
                        <p>10AM - 08PM</p>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <h4 class="section-title ff-secondary text-start text-primary fw-normal mb-4">Newsletter
                        </h4>
                        <p>Dolor amet sit justo amet elitr clita ipsum elitr est.</p>
                        <div class="position-relative mx-auto" style="max-width: 400px;">
                            <input class="form-control border-primary w-100 py-3 ps-4 pe-5" type="text"
                                placeholder="Your email">
                            <button type="button"
                                class="btn btn-primary py-2 position-absolute top-0 end-0 mt-2 me-2">SignUp</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="copyright">
                    <div class="row">
                        <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                            &copy; <a class="border-bottom" href="#">Your Site Name</a>, All Right Reserved.

                            <!--/*** This template is free as long as you keep the footer author’s credit link/attribution link/backlink. If you'd like to use the template without the footer author’s credit link/attribution link/backlink, you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". Thank you for your support. ***/-->
                            Designed By <a class="border-bottom" href="{% static 'https://htmlcodex.com' %}">HTML
                                Codex</a><br><br>
                            Distributed By <a class="border-bottom" href="{% static 'https://themewagon.com' %}"
                                target="_blank">ThemeWagon</a>
                        </div>
                        <div class="col-md-6 text-center text-md-end">
                            <div class="footer-menu">
                                <a href="">Home</a>
                                <a href="">Cookies</a>
                                <a href="">Help</a>
                                <a href="">FQAs</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Footer End -->


        <!-- Back to Top -->
        <!-- <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up">
                
        </i></a> -->
    </div>

    <!-- JavaScript Libraries -->


    

    <script src="{% static 'https://code.jquery.com/jquery-3.4.1.min.js' %}"></script>
    <script src="{% static 'https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js' %}">
    </script>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js">
    <script src="{% static 'lib/wow/wow.min.js' %}"></script>
    <script src="{% static 'lib/easing/easing.min.js' %}"></script>
    <script src="{% static 'lib/waypoints/waypoints.min.js' %}"></script>
    <script src="{% static 'lib/counterup/counterup.min.js' %}"></script>
    <script src="{% static 'lib/owlcarousel/owl.carousel.min.js' %}"></script>
    <script src="{% static 'lib/tempusdominus/js/moment.min.js' %}"></script>
    <script src="{% static 'lib/tempusdominus/js/moment-timezone.min.js' %}"></script>
    <script src="{% static 'lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
    <script src="{% static 'js/food.js' %}"></script>
    <script>
    function openForm() {document.getElementById("myForm").style.display = "block";}
    function closeForm() {document.getElementById("myForm").style.display = "none";}
    </script>
    
    
    {% block js %}
    
    {% endblock js %}
    <!-- Template Javascript -->
</body>

</html>